description: STM32 Digital Filter Accelerator Module

compatible: "st,stm32-fmac"

include:
  - name: base.yaml
  - name: reset-device.yaml

properties:
  reg:
    required: true

  clocks:
    required: true

  resets:
    required: true

  interrupts:
    required: true
  
  operation:
    type: string
    enum:
      - "convolution"
      - "iir"
    default: "convolution"
    description: Selects the type of operation performed by the FMAC. When configuring
      the FMAC for FIR, select "convolution".

  feedback_coeffs:
    type: int
    default: 0
    description: The number of feedback coefficients for an IIR filter. Only meaningful
      if `operation` is set to "iir".

  x1_wm:
    type: int
    enum:
      - 1
      - 2
      - 4
      - 8
    default: 2
    description: Watermark for X1 buffer in samples.

  y_wm:
    type: int
    enum:
      - 1
      - 2
      - 4
      - 8
    default: 2
    description: Watermark for Y buffer in samples.

  x1_size:
    type: int
    default: 4
    description: Entries allocated for X1 buffer.

  x2_size:
    type: int
    default: 248
    description: Entries allocated for X2 buffer.
    
  y_size:
    type: int
    default: 4
    description: Entries allocated for Y buffer.

  lshift:
    type: int
    default: 0
    description: Left-shift applied to output data.

  clip:
    type: boolean
    description: Enable clipping (saturation on output).